<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

    <title>Todo by avinash</title>
  </head>
  <body>

    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
        <a class="navbar-brand" href="#">Navbar</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
      
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
          <ul class="navbar-nav mr-auto">
            <li class="nav-item active">
              <a class="nav-link" href="#">Home <span class="sr-only">(current)</span></a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#">Link</a>
            </li>
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                Dropdown
              </a>
              <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                <a class="dropdown-item" href="#">Action</a>
                <a class="dropdown-item" href="#">Another action</a>
                <div class="dropdown-divider"></div>
                <a class="dropdown-item" href="#">Something else here</a>
              </div>
            </li>
            <li class="nav-item">
              <a class="nav-link disabled" href="#" tabindex="-1" aria-disabled="true">Disabled</a>
            </li>
          </ul>
          <form class="form-inline my-2 my-lg-0">
            <input class="form-control mr-sm-2" type="search" placeholder="Search" aria-label="Search">
            <button class="btn btn-outline-success my-2 my-sm-0" type="submit">Search</button>
          </form>
        </div>
      </nav>

      <div>
       <h2  style="text-align:center">ToDOs List</h2>
       <div style="margin-inline: 12%;">
        <div class="form-group">
          <label for="title">Title </label>
          <input type="text" class="form-control" id="title" aria-describedby="emailHelp" placeholder="add title">
          <small id="emailHelp" class="form-text text-muted">Add list here.</small>
        </div>

        <div class="form-group">
            <label for="description">Description</label>
            <textarea class="form-control" id="description" rows="3"></textarea>
        </div>
        
        <button type="button"  id="abj1"  class="btn btn-primary">Add to list</button>
        <button type="button" id="rollno_5" class="btn btn-primary">Clear list</button>

        <br>
      <h2 style="margin-top: 50px">Your items</h2>
      <table class="table" id="rollno_1">
        <thead>
          <tr>
            <th scope="col">Sno</th>
            <th scope="col">Item list</th>
            <th scope="col">Item Description</th>
            <th scope="col">Actions</th>
          </tr>
        </thead>
        <tbody id="rollno_2">
          <tr>
            <th scope="row">1</th>
            <td>arpit</td>
            <td>you need ac</td>
            <td><button type="button" id="rollno_21" class="btn btn-primary">Delete</button></td>
          </tr>
          
        </tbody>
      </table>
      </div>




    </div>



    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.14.7/dist/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
    <script>

      let obj2=document.getElementById("rollno_5");
      obj2.addEventListener('click',()=>{
        
        console.log("ajajajdklfjkl;sdjf");
        localStorage.clear();
        let tablebody=document.getElementById("rollno_2");
       tablebody.innerHTML="";

        return ;

       
      });
      
     
      function update(){
        let arr=[];

        first_value=document.getElementById('title').value;
        second_value=document.getElementById('description').value;
         
        // console.log(first_value,second_value);

        // document.getElementById("rollno_1").innerHTML += "<tr><td>" + $("#rollno_1 tr").length + "</td><td>" + first_value+ "</td><td>" +second_value+  "</td></tr> ";
        
        if(localStorage.getItem('itemjson')==null){
          if(first_value.length!=0)
          arr.push([first_value,second_value]);
          localStorage.setItem('itemjson',JSON.stringify(arr));

        }
        else{
            // console.log("ds;lfjasd;lf aa ki chut");
            let str="";
            str=localStorage.getItem('itemjson');
            arr=JSON.parse(str);
            if(first_value.length!=0)
            arr.push([first_value,second_value]);
            localStorage.setItem('itemjson',JSON.stringify(arr));
        }
      
      let tablebody=document.getElementById("rollno_2");
      let str="";
      for(let i=0;i<arr.length;i++){
        str += `<tr>
            <th scope="row">${i+1}</th>
            <td> ${arr[i][0]} </td>
            <td>${arr[i][1]}</td>
            <td><button type="button" id='rollno_3'  onclick="deletekrdo(${i})" class="btn btn-primary">Delete</button></td>
          </tr>
        `
          
      };
    
     tablebody.innerHTML=str;
     return ;
      }
      obj=document.getElementById("abj1");
      obj.addEventListener('click',update);
     
      
      
      
    
      function updatedelete(){

        let str="";
        let arr=[];
        let tablebody=document.getElementById("rollno_2");
            akj=localStorage.getItem('itemjson');
            arr=JSON.parse(akj);
            for(let i=0;i<arr.length;i++){
              str += `<tr>
            <th scope="row">${i+1}</th>
            <td> ${arr[i][0]} </td>
            <td>${arr[i][1]}</td>
            <td><button type="button" id='rollno_3'  onclick="deletekrdo(${i})" class="btn btn-primary">Delete</button></td>
          </tr>
        `
            }
            tablebody.innerHTML=str;
            return ;


      }
      function deletekrdo(index){

        itemjsonarraystr =localStorage.getItem("itemjson");
        itemjsonarray=JSON.parse(itemjsonarraystr);
        itemjsonarray.splice(index,1);
        localStorage.setItem('itemjson',JSON.stringify(itemjsonarray));
         if(itemjsonarray.length==0){
          let tablebody=document.getElementById("rollno_2");
          localStorage.clear();
          tablebody.innerHTML="";
          return ;
         }
        updatedelete();
        return ;
      }
      
      update();

      
    </script>
  </body>
</html>